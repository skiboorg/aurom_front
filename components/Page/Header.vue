<script setup lang="ts">
import { useI18n } from 'vue-i18n'
const { locale } = useI18n()
const { t } = useI18n()
const cartCount = useState('cartCount')
const mobileMenuActive = ref(false)
const q = ref(null)
const languages = [
  {name:'RU',value:'ru'},
  {name:'EN',value:'en'},
]

const selectedLang = ref(locale.value)
const switchLanguage = () => {
  console.log(selectedLang.value)
  locale.value = selectedLang.value
  window.location.href = `/${selectedLang.value}${window.location.pathname.replace(/^\/[^\/]+/, '')}`
}

const links = [
  {label:t('promotion'), url:'/promotion'},
  {label:t('menu_about'), url:'/about'},
  {label:t('menu_partner'), url:'/partnership'},
  {label:t('menu_add_service'), url:'/services'},
  //{label:t('menu_delivery'), url:'/'},
  {label:t('menu_contacts'), url:'/contacts'},
  {label:t('menu_news'), url:'/news'},
  {label:t('sale'), url:'/sale'},
]
</script>

<template>
  <header>

    <div class="container">
      <div class="flex items-center justify-between py-5 border-b gap-5">
        <NuxtLinkLocale  to="/">
        <img src="~/assets/images/logo.png" alt="">
        </NuxtLinkLocale>


        <div class="hidden lg:flex items-center gap-4">
          <a href="https://wa.me/+79280675112" target="_blank" rel="noopener noreferrer">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.05 2.91005C16.1331 1.98416 15.0411 1.25002 13.8376 0.750416C12.634 0.250812 11.3431 -0.00426317 10.04 5.38951e-05C4.58005 5.38951e-05 0.130049 4.45005 0.130049 9.91005C0.130049 11.6601 0.590049 13.3601 1.45005 14.8601L0.0500488 20.0001L5.30005 18.6201C6.75005 19.4101 8.38005 19.8301 10.04 19.8301C15.5 19.8301 19.9501 15.3801 19.9501 9.92005C19.9501 7.27005 18.92 4.78005 17.05 2.91005ZM10.04 18.1501C8.56005 18.1501 7.11005 17.7501 5.84005 17.0001L5.54005 16.8201L2.42005 17.6401L3.25005 14.6001L3.05005 14.2901C2.2276 12.9771 1.79097 11.4593 1.79005 9.91005C1.79005 5.37005 5.49005 1.67005 10.03 1.67005C12.23 1.67005 14.3 2.53005 15.85 4.09005C16.6177 4.85392 17.226 5.7626 17.6397 6.76338C18.0534 7.76417 18.2642 8.83714 18.26 9.92005C18.2801 14.4601 14.58 18.1501 10.04 18.1501ZM14.56 11.9901C14.31 11.8701 13.09 11.2701 12.87 11.1801C12.64 11.1001 12.48 11.0601 12.31 11.3001C12.14 11.5501 11.67 12.1101 11.53 12.2701C11.39 12.4401 11.24 12.4601 10.99 12.3301C10.74 12.2101 9.94005 11.9401 9.00005 11.1001C8.26005 10.4401 7.77005 9.63005 7.62005 9.38005C7.48005 9.13005 7.60005 9.00005 7.73005 8.87005C7.84005 8.76005 7.98005 8.58005 8.10005 8.44005C8.22005 8.30005 8.27005 8.19005 8.35005 8.03005C8.43005 7.86005 8.39005 7.72005 8.33005 7.60005C8.27005 7.48005 7.77005 6.26005 7.57005 5.76005C7.37005 5.28005 7.16005 5.34005 7.01005 5.33005H6.53005C6.36005 5.33005 6.10005 5.39005 5.87005 5.64005C5.65005 5.89005 5.01005 6.49005 5.01005 7.71005C5.01005 8.93005 5.90005 10.1101 6.02005 10.2701C6.14005 10.4401 7.77005 12.9401 10.25 14.0101C10.84 14.2701 11.3 14.4201 11.66 14.5301C12.25 14.7201 12.79 14.6901 13.22 14.6301C13.7 14.5601 14.69 14.0301 14.89 13.4501C15.1 12.8701 15.1 12.3801 15.03 12.2701C14.96 12.1601 14.81 12.1101 14.56 11.9901Z" fill="black"/>
            </svg>

          </a>
          <div class="flex items-center gap-2">

            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_0_58)">
                <path d="M16.5001 12.6901V14.9401C16.5009 15.1489 16.4581 15.3557 16.3745 15.5471C16.2908 15.7385 16.168 15.9103 16.0141 16.0515C15.8602 16.1927 15.6785 16.3002 15.4806 16.3671C15.2828 16.434 15.0731 16.4589 14.8651 16.4401C12.5572 16.1893 10.3403 15.4007 8.39257 14.1376C6.58044 12.9861 5.04407 11.4497 3.89257 9.63757C2.62506 7.68098 1.83625 5.45332 1.59007 3.13507C1.57133 2.92767 1.59598 2.71864 1.66245 2.52129C1.72892 2.32394 1.83575 2.14259 1.97615 1.98879C2.11654 1.83499 2.28743 1.7121 2.47792 1.62796C2.6684 1.54382 2.87433 1.50027 3.08257 1.50007H5.33257C5.69655 1.49649 6.04942 1.62538 6.32539 1.86272C6.60137 2.10006 6.78163 2.42966 6.83257 2.79007C6.92754 3.51012 7.10366 4.21712 7.35757 4.89757C7.45848 5.16602 7.48032 5.45776 7.4205 5.73823C7.36069 6.01871 7.22172 6.27616 7.02007 6.48007L6.06757 7.43257C7.13524 9.31023 8.68991 10.8649 10.5676 11.9326L11.5201 10.9801C11.724 10.7784 11.9814 10.6395 12.2619 10.5796C12.5424 10.5198 12.8341 10.5417 13.1026 10.6426C13.783 10.8965 14.49 11.0726 15.2101 11.1676C15.5744 11.219 15.9071 11.4025 16.145 11.6832C16.3828 11.9639 16.5092 12.3223 16.5001 12.6901Z" stroke="#2C2C2C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </g>
            </svg>

            <p class="opacity-80 "><a href="tel:+7 928 067 51 12">+7 928 067 51 12</a></p>

          </div>

          <a href="https://wa.me/+79280675112" target="_blank">
            <Button severity="danger" :label="t('button_callback')" />
          </a>

          <Select v-model="selectedLang" :options="languages" @update:modelValue="switchLanguage" option-value="value" option-label="name"   />
        </div>
        <div class="flex lg:hidden items-center gap-4">
          <a href="https://wa.me/+79280675112" target="_blank" rel="noopener noreferrer">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.05 2.91005C16.1331 1.98416 15.0411 1.25002 13.8376 0.750416C12.634 0.250812 11.3431 -0.00426317 10.04 5.38951e-05C4.58005 5.38951e-05 0.130049 4.45005 0.130049 9.91005C0.130049 11.6601 0.590049 13.3601 1.45005 14.8601L0.0500488 20.0001L5.30005 18.6201C6.75005 19.4101 8.38005 19.8301 10.04 19.8301C15.5 19.8301 19.9501 15.3801 19.9501 9.92005C19.9501 7.27005 18.92 4.78005 17.05 2.91005ZM10.04 18.1501C8.56005 18.1501 7.11005 17.7501 5.84005 17.0001L5.54005 16.8201L2.42005 17.6401L3.25005 14.6001L3.05005 14.2901C2.2276 12.9771 1.79097 11.4593 1.79005 9.91005C1.79005 5.37005 5.49005 1.67005 10.03 1.67005C12.23 1.67005 14.3 2.53005 15.85 4.09005C16.6177 4.85392 17.226 5.7626 17.6397 6.76338C18.0534 7.76417 18.2642 8.83714 18.26 9.92005C18.2801 14.4601 14.58 18.1501 10.04 18.1501ZM14.56 11.9901C14.31 11.8701 13.09 11.2701 12.87 11.1801C12.64 11.1001 12.48 11.0601 12.31 11.3001C12.14 11.5501 11.67 12.1101 11.53 12.2701C11.39 12.4401 11.24 12.4601 10.99 12.3301C10.74 12.2101 9.94005 11.9401 9.00005 11.1001C8.26005 10.4401 7.77005 9.63005 7.62005 9.38005C7.48005 9.13005 7.60005 9.00005 7.73005 8.87005C7.84005 8.76005 7.98005 8.58005 8.10005 8.44005C8.22005 8.30005 8.27005 8.19005 8.35005 8.03005C8.43005 7.86005 8.39005 7.72005 8.33005 7.60005C8.27005 7.48005 7.77005 6.26005 7.57005 5.76005C7.37005 5.28005 7.16005 5.34005 7.01005 5.33005H6.53005C6.36005 5.33005 6.10005 5.39005 5.87005 5.64005C5.65005 5.89005 5.01005 6.49005 5.01005 7.71005C5.01005 8.93005 5.90005 10.1101 6.02005 10.2701C6.14005 10.4401 7.77005 12.9401 10.25 14.0101C10.84 14.2701 11.3 14.4201 11.66 14.5301C12.25 14.7201 12.79 14.6901 13.22 14.6301C13.7 14.5601 14.69 14.0301 14.89 13.4501C15.1 12.8701 15.1 12.3801 15.03 12.2701C14.96 12.1601 14.81 12.1101 14.56 11.9901Z" fill="black"/>
            </svg>

          </a>
          <NuxtLinkLocale to="/search" class="flex items-center justify-between cursor-pointer">
            <div class="flex items-center gap-2">
              <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.1458 14.5833H15.3229L15.0313 14.3021C16.0875 13.0772 16.6679 11.5132 16.6667 9.89584C16.6667 8.55669 16.2696 7.24762 15.5256 6.13416C14.7816 5.02071 13.7241 4.15287 12.4869 3.6404C11.2497 3.12793 9.88832 2.99385 8.57491 3.2551C7.2615 3.51636 6.05505 4.16122 5.10813 5.10813C4.16122 6.05505 3.51636 7.2615 3.2551 8.57491C2.99385 9.88832 3.12793 11.2497 3.6404 12.4869C4.15287 13.7241 5.02071 14.7816 6.13416 15.5256C7.24762 16.2696 8.55669 16.6667 9.89584 16.6667C11.5729 16.6667 13.1146 16.0521 14.3021 15.0313L14.5833 15.3229V16.1458L19.7917 21.3438L21.3438 19.7917L16.1458 14.5833ZM9.89584 14.5833C7.30209 14.5833 5.20834 12.4896 5.20834 9.89584C5.20834 7.30209 7.30209 5.20834 9.89584 5.20834C12.4896 5.20834 14.5833 7.30209 14.5833 9.89584C14.5833 12.4896 12.4896 14.5833 9.89584 14.5833Z" fill="#666666" />
              </svg>


            </div>
          </NuxtLinkLocale>
          <NuxtLinkLocale to="/cart" class="flex lg:hidden items-center justify-between cursor-pointer">
            <div class="flex items-center gap-2">
              <svg width="23" height="25" viewBox="0 0 23 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.804 1.0322C9.24114 1.27353 7.93399 2.22506 7.25911 3.6041C6.93232 4.27293 6.79735 4.90728 6.79735 5.84503V6.62418H5.19894C3.50818 6.62418 3.25243 6.66555 3.14587 6.94825C3.05352 7.1689 0.964928 22.7175 1.00045 22.8692C1.02176 22.945 1.27751 23.2277 1.56877 23.5035L2.09447 24H11.4789H20.8562L21.2328 23.6759C21.6732 23.2967 22 22.9175 22 22.7865C22 22.5865 19.8688 7.04478 19.8262 6.93446C19.7196 6.66555 19.4496 6.62418 17.7731 6.62418H16.1747V5.84503C16.1747 4.91418 16.0397 4.27293 15.72 3.62478C15.1375 2.43192 14.1642 1.5976 12.8997 1.21147C12.2959 1.0322 11.3652 0.949457 10.804 1.0322ZM12.6511 2.28022C13.2194 2.46639 13.6883 2.76978 14.1145 3.22486C14.8036 3.95575 15.038 4.61769 15.038 5.81055V6.62418H11.486H7.93399V5.91398C7.93399 5.52785 7.98372 5.01071 8.04056 4.76938C8.34603 3.51446 9.38322 2.50087 10.6762 2.1768C11.2161 2.04579 12.097 2.08716 12.6511 2.28022ZM18.8316 7.91358C18.8955 8.23075 20.7923 22.2486 20.7923 22.421C20.7923 22.5037 20.7213 22.6485 20.636 22.7382L20.4868 22.8968H11.486H2.4923L2.30759 22.7037L2.12999 22.5175L3.14587 15.1397C3.69998 11.0785 4.16175 7.75499 4.16175 7.7412C4.16885 7.7343 7.45802 7.72741 11.4789 7.72741H18.789L18.8316 7.91358Z" fill="#666666" stroke="#666666" stroke-width="0.5"/>
              </svg>
              {{cartCount}}

            </div>
          </NuxtLinkLocale>
          <i  class="block lg:hidden pi pi-bars" @click="mobileMenuActive = !mobileMenuActive"></i>
        </div>

      </div>
      <div class="hidden lg:flex items-center justify-between py-5">

          <NuxtLinkLocale class="flex items-center gap-2 cursor-pointer" to="/catalog">
          <svg width="24" height="9" viewBox="0 0 24 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 1.5L17.2609 1.5" stroke="#666666" stroke-width="2" stroke-linecap="round"/>
            <path d="M1 7.5H23" stroke="#666666" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <p class="text-gray-400">{{t('breadcrumb_catalog')}}</p>
          </NuxtLinkLocale>

        <div class="flex items-center gap-4">
          <NuxtLinkLocale class="opacity-80 " :to="link.url" v-for="(link,index) in links" :key="index">{{link.label}}</NuxtLinkLocale>

        </div>
        <div class="flex items-center gap-4">
          <NuxtLinkLocale to="/search" class="flex items-center justify-between cursor-pointer">
            <div class="flex items-center gap-2">
              <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.1458 14.5833H15.3229L15.0313 14.3021C16.0875 13.0772 16.6679 11.5132 16.6667 9.89584C16.6667 8.55669 16.2696 7.24762 15.5256 6.13416C14.7816 5.02071 13.7241 4.15287 12.4869 3.6404C11.2497 3.12793 9.88832 2.99385 8.57491 3.2551C7.2615 3.51636 6.05505 4.16122 5.10813 5.10813C4.16122 6.05505 3.51636 7.2615 3.2551 8.57491C2.99385 9.88832 3.12793 11.2497 3.6404 12.4869C4.15287 13.7241 5.02071 14.7816 6.13416 15.5256C7.24762 16.2696 8.55669 16.6667 9.89584 16.6667C11.5729 16.6667 13.1146 16.0521 14.3021 15.0313L14.5833 15.3229V16.1458L19.7917 21.3438L21.3438 19.7917L16.1458 14.5833ZM9.89584 14.5833C7.30209 14.5833 5.20834 12.4896 5.20834 9.89584C5.20834 7.30209 7.30209 5.20834 9.89584 5.20834C12.4896 5.20834 14.5833 7.30209 14.5833 9.89584C14.5833 12.4896 12.4896 14.5833 9.89584 14.5833Z" fill="#666666" />
              </svg>

              <p class="text-gray-400">{{t('breadcrumb_search')}}</p>
            </div>
          </NuxtLinkLocale>
          <NuxtLinkLocale to="/cart" class="flex items-center justify-between cursor-pointer">
            <div class="flex items-center gap-2">
              <svg width="23" height="25" viewBox="0 0 23 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.804 1.0322C9.24114 1.27353 7.93399 2.22506 7.25911 3.6041C6.93232 4.27293 6.79735 4.90728 6.79735 5.84503V6.62418H5.19894C3.50818 6.62418 3.25243 6.66555 3.14587 6.94825C3.05352 7.1689 0.964928 22.7175 1.00045 22.8692C1.02176 22.945 1.27751 23.2277 1.56877 23.5035L2.09447 24H11.4789H20.8562L21.2328 23.6759C21.6732 23.2967 22 22.9175 22 22.7865C22 22.5865 19.8688 7.04478 19.8262 6.93446C19.7196 6.66555 19.4496 6.62418 17.7731 6.62418H16.1747V5.84503C16.1747 4.91418 16.0397 4.27293 15.72 3.62478C15.1375 2.43192 14.1642 1.5976 12.8997 1.21147C12.2959 1.0322 11.3652 0.949457 10.804 1.0322ZM12.6511 2.28022C13.2194 2.46639 13.6883 2.76978 14.1145 3.22486C14.8036 3.95575 15.038 4.61769 15.038 5.81055V6.62418H11.486H7.93399V5.91398C7.93399 5.52785 7.98372 5.01071 8.04056 4.76938C8.34603 3.51446 9.38322 2.50087 10.6762 2.1768C11.2161 2.04579 12.097 2.08716 12.6511 2.28022ZM18.8316 7.91358C18.8955 8.23075 20.7923 22.2486 20.7923 22.421C20.7923 22.5037 20.7213 22.6485 20.636 22.7382L20.4868 22.8968H11.486H2.4923L2.30759 22.7037L2.12999 22.5175L3.14587 15.1397C3.69998 11.0785 4.16175 7.75499 4.16175 7.7412C4.16885 7.7343 7.45802 7.72741 11.4789 7.72741H18.789L18.8316 7.91358Z" fill="#666666" stroke="#666666" stroke-width="0.5"/>
              </svg>
              {{cartCount}}
              <p class="text-gray-400">{{t('breadcrumb_cart')}}</p>
            </div>
          </NuxtLinkLocale>
        </div>

      </div>
    </div>
    <Drawer v-model:visible="mobileMenuActive" header=" " position="right">
      <div class="flex flex-col items-start gap-4">

        <NuxtLinkLocale class="opacity-80 " :to="link.url" v-for="(link,index) in links" :key="index">{{link.label}}</NuxtLinkLocale>
        <Select fluid class="w-full" v-model="selectedLang" :options="languages" @update:modelValue="switchLanguage" option-value="value" option-label="name"   />
        <a href="https://wa.me/+79280675112" target="_blank" class="w-full">
          <Button fluid severity="danger" :label="t('button_callback')" />
        </a>
      </div>


    </Drawer>
  </header>
</template>

<style scoped>

</style>